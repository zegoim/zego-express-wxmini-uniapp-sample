import { StateCenter } from "./stateCenter";
import { CdnPushConfig, MixStreamConfig, ERRO, MixStreamAdvance, ZegoResponse, StreamInfo, ZegoRoomInfo } from "./zego.entity";
import { ZegoDataReport, ZegoLogger } from "../common/zego.entity";
import { ZegoExpressWebRTM } from "zego-express-engine-webrtm/sdk/src";
import { ZegoStreamCenter } from "./streamCenter";
export declare class StreamHandler {
    private logger;
    private stateCenter;
    private rtm;
    private dataReport;
    private streamCenter;
    private roomID;
    private minStreamSeq;
    private streamSeq;
    private streamQuerying;
    private streamSeqMergeMap;
    private streamSeqMergeTimer;
    private streamListHBMergeInterval;
    private streamListMergeInterval;
    room?: ZegoRoomInfo;
    constructor(logger: ZegoLogger, stateCenter: StateCenter, rtm: ZegoExpressWebRTM, dataReport: ZegoDataReport, streamCenter: ZegoStreamCenter, roomID: string);
    private setCDNInfo;
    onStreamUpdated(roomid: string, type: number, streamList: any[]): void;
    onStreamExtraInfoUpdated(roomid: string, streamList: any[]): void;
    handleStreamStart(msg: any, room: ZegoRoomInfo): void;
    onPublishStateUpdate(type: number, streamId: string, error: ERRO): void;
    updateStreamInfo(streamid: string, cmd: string | number, stream_extra_info?: string, error?: Function): void;
    handleStreamUpdateRsp(msg: any): void;
    handleFetchStreamListRsp(msg: any): void;
    private handleFullUpdateStream;
    handlePushStreamUpdateMsg(msg: any): void;
    handlePriPushStreamUpdateMsg(msg: any): void;
    private handleAddedStreamList;
    private handleDeletedStreamList;
    private handleUpdatedStreamList;
    fetchStreamList(): void;
    private handleReconnectStream;
    makeCallbackStreamList(streamList: any[]): any;
    updateMixStream(mixStreamConfig: MixStreamConfig, successCallback: Function, errorCallback: (err: ZegoResponse) => void): boolean;
    sendBizChannelRequest(reqBody: any, success: Function, error: Function, isRetry?: boolean): void;
    setMixerTaskConfig(advance: MixStreamAdvance): Promise<ZegoResponse>;
    stopMixStream(taskid: string, successCallback: Function, errorCallback: (err: ZegoResponse) => void, outputStreamId?: string, outputUrl?: string): boolean;
    updateStreamExtraInfo(streamid: string, extraInfo: string, success: Function, error: Function): void;
    setStreamExtraInfo(streamID: string, extraInfo: string, success: Function, error: (err: ERRO, errMsg: string) => void): void;
    _publishTarget(cdnPushConfig: CdnPushConfig, success: (result: ZegoResponse) => void, error: (err: ERRO, externMsg?: string) => void): void;
    patchStreamList(msg: any): void;
    mergeStreamByStreamSeq(cmd: number, streamSeq: number, streamList: any[]): void;
    handleMergeTimeout(): void;
    mergeStream(streamSeqList: any[]): void;
    reset(): void;
    getRoomInfo(): Promise<{
        streamList: StreamInfo[];
    }>;
}
